<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<include file="struts-monitor.xml" />
	<include file="struts-dashboard.xml" />
	<include file="struts-sysSetting.xml" />
	<include file="struts-sysTools.xml" />
	<include file="struts-adcSetting.xml" />
	<include file="struts-virtualServer.xml" />
	<include file="struts-report.xml" />
	<!-- <include file="struts-alert.xml" /> -->
	<include file="struts-test.xml" />
	<include file="struts-faultDiagnosis.xml" />
	<include file="struts-respTime.xml" />
	
	<include file="struts-angular.xml" />
	
	<package name="json-hierarchy" extends="json-default">
		<result-types>
            <result-type name="jsonHierarchy" class="org.apache.struts2.json.JSONResult">
            	<param name="ignoreHierarchy">false</param>
            </result-type>
        </result-types>
	</package>
	
	<package name="member" namespace="/member" extends="json-default">
		<action name="retrieveCookies" method="retrieveCookies" class="loginAction">
			<result type="json"/>
		</action>
		<action name="retrieveLangCode" method="retrieveLangCode" class="loginAction">
			<result type="json"/>
		</action>
		<action name="login" method="loginAngular" class="loginAction">
			<result type="json">
				<param name="ignoreHierarchy">false</param>
			</result>
		</action>
	   	<action name="retrievePasswdResetWarningMsg" method="retrievePasswdResetWarningMsg" class="loginAction">
			<result type="json"/>
		</action>
		<action name="login" method="login" class="loginAction">
			<result type="json">
				<param name="ignoreHierarchy">false</param>
			</result>
<!-- 			<result type="redirectAction"> -->
<!-- 				<param name="actionName">main</param> -->
<!-- 				<param name="namespace">/</param> -->
<!-- 			</result> -->
		</action>
		<action name="logout" method="logout" class="loginAction">
			<result type="redirectAction">
				<param name="actionName">main</param>
				<param name="namespace">/</param>
			</result>
		</action>
	</package>
	
	<package name="layout" namespace="/layout" extends="json-default">
		<action name="loadLoginCheck" method="loadLoginCheck" class="headerAction">
			<result type="json">
				<param name="ignoreHierarchy">false</param>
			</result>
		</action>
	
		<action name="loadHeader" method="loadHeader" class="headerAction">
			<result type="freemarker">/WEB-INF/pages/layout/header.ftl</result>
		</action>			
		<action name="loadLeftNavi" method="loadLeftNavi" class="headerAction">
			<result type="freemarker">/WEB-INF/pages/layout/leftnavigator.ftl</result>
		</action>
		<action name="loadPickView" method="loadPickView" class="headerAction">
			<result type="freemarker">/WEB-INF/pages/layout/pickview.ftl</result>
		</action>	
		<action name="loadAdcSearchBar" method="loadAdcSearchBar" class="headerAction">
			<result type="freemarker">/WEB-INF/pages/layout/adcsearchbar.ftl</result>
		</action>
		<action name="loadContent" method="loadContent" class="headerAction">
			<result type="freemarker">/WEB-INF/pages/layout/main.ftl</result>
		</action>		
	</package>
	
	<package name="alert" namespace="/alert" extends="json-hierarchy">
		<!-- alarm message -->
		<action name="loadAlertSettingData" method="loadAlertSettingData" class="alertAction">
			<result type="jsonHierarchy"/>
		</action>
		<action name="modifyUserAlertTime" method="modifyUserAlertTime" class="alertAction">
			<result type="jsonHierarchy"/>
		</action>
		<action name="loadTickerBGContent" method="loadTickerAlertContent" class="alertAction">
			<result type="freemarker">/WEB-INF/pages/layout/ticker/tickerBackGround.ftl</result>
		</action>
		<action name="loadTickerNoticeContent" method="loadTickerAlertContent" class="alertAction">
			<result type="freemarker">/WEB-INF/pages/layout/ticker/tickerNotice.ftl</result>
		</action>		
		<action name="loadPopupAlertContent" method="loadPopupAlertContent" class="alertAction">
			<result type="freemarker">/WEB-INF/pages/layout/alertPopup.ftl</result>
		</action>
		<action name="refreshPopupAlertContent" method="loadPopupAlertContent" class="alertAction">
			<result type="freemarker">/WEB-INF/pages/layout/alertPopupTableIn.ftl</result>
		</action>		
	</package>
	
	<package name="OBGeneral" namespace="/OBGeneral" extends="json-hierarchy">
		<action name="getOBExceptionInfo" method="getOBExceptionInfo" class="OBGeneralAction">
			<result type="jsonHierarchy"/>
		</action>	
	</package>
		
	<package name="default" namespace="/" extends="json-hierarchy">
	
		<interceptors>
	        <interceptor-stack name="secureDefaultStack">
	            <interceptor-ref name="defaultStack">
	                <param name="params.excludeParams">(.*\.|^|.*|\[('|"))(c|C)lass(\.|('|")]|\[).*,^dojo\..*,^struts\..*,^session\..*,^request\..*,^application\..*,^servlet(Request|Response)\..*,^parameters\..*,^action:.*,^method:.*</param>
	            </interceptor-ref>
	        </interceptor-stack>
	    </interceptors>
	
	    <default-interceptor-ref name="secureDefaultStack" />
	    
		<action name="main" method="loadMain" class="loginAction">
			<result>/WEB-INF/pages/main.jsp</result>
		</action>
		<action name="dashboard">
			<result>/WEB-INF/pages/dashboard.jsp</result>
		</action>
		<action name="base" class="baseAction">
			<result type="jsonHierarchy"/>
		</action>
		<action name="loadConfigContent" method="loadConfigContent" class="securityNoticeAction">
			<result type="jsonHierarchy"/>
		</action>
	</package>
	
</struts>