var OBAjax=Class.create(	// nimbleLoader 가 빠진 AjaxManager
		{
			initialize:function()
			{				
				/*var d=this;*/
				this.singleAjax=$.manageAjax.create('singleQueue2',{queue:true});
				this.idsInQueue=[];
				/*this._initLoadingBar();
				$(document).bind('singleQueueAjaxStart',function(e)
				{
					FlowitUtil.log('singleQueueAjaxStart:');
					d._showLoader(true);
				});
				$(document).bind('singleQueueAjaxStop',function(e)
				{
					FlowitUtil.log('singleQueueAjaxStop:');
					d._showLoader(false);
				});
				$(document).bind('singleQueueAjaxComplete',function(e,a,b,c)
				{
					FlowitUtil.log('singleQueueAjaxComplete:');
					FlowitUtil.log('status: '+b);
					d._removeId(c.xhrID);
				});*/
			},
			isRunning:function()
			{
				with(this)
				{
					if(idsInQueue.length>0)
						return true;
					return false;
				}
			},
			abort:function()
			{
				this.singleAjax.abort();
			},
			runIfIdle:function(a)
			{
				with(this)
				{
					if(idsInQueue.length>0)
					{
						$.obAlertNotice(VAR_ETC_TASKRUN);
						return;
					}
					_addId(singleAjax.add(a));
				}
			},
			run:function(a)
			{
				with(this)
				{
					FlowitUtil.log("run()");
					_addId(singleAjax.add(a));
				}
			},
			runHtml:function(d,e)
			{
				with(this)
				{
					var f=$.extend({target:"",
									url:"",
									data:"",
									successFn:"",
									completeFn:"",
									type:"POST",
									traditional:true,
									params:""},
									d);
					if(f.target=="")
						return;
					if(f.url=="")
						return;
					run({url:f.url,
						dataType:"html",
						data:f.data,
						type:f.type,
						traditional:f.traditional,
						success:function(a)
						{
							$(f.target).html(a);
							if(f.successFn!="")
								f.successFn(f.params);
						},
						error:function(jqXhr, status, message)
						{
							ajaxExceptionMessage(jqXhr, status, message);
						},
						complete:function(a,b)
						{
							if(f.completeFn!="")
								f.completeFn(b);
							if(e)
								e.notifyTaskDone();
						}
					});
				}
			},
			runHtmlExt:function(d,e)
			{
				with(this)
				{
					var f=$.extend({target:"",
									url:"",
									data:"",
									successFn:"",
									completeFn:"",
									errorFn:"",
									type:"POST",
									traditional:true,
									params:""},
									d);
					if(f.target=="")
						return;
					if(f.url=="")
						return;
					run({url:f.url,
						dataType:"html",
						data:f.data,
						type:f.type,
						traditional:f.traditional,
						success:function(a)
						{
							$(f.target).html(a);
							if(f.successFn!="")
								f.successFn(f.params);
						},
						error:function(jqXhr, status, message)
						{
							if(f.errorFn!="")
								f.errorFn(jqXhr, status, f.data);
							else
								ajaxExceptionMessage(jqXhr, status, message);
						},
						complete:function(a,b)
						{
							if(f.completeFn!="")
								f.completeFn(b);
							if(e)
								e.notifyTaskDone();
						}
					});
				}
			},		
			runJson:function(d,e)
			{
				with(this)
				{
					var f=$.extend({target:"",
									url:"",
									data:"",
									successFn:"",
									completeFn:"",
									type:"POST",
									traditional:true},
									d);
					if(f.url=="")
						return;
					run({url:f.url,
						data:f.data,
						type:f.type,
						traditional:f.traditional,
						dataType:"json",
						success:function(a)
						{
							if(f.successFn!="")
								f.successFn(a);
						},
						error:function(jqXhr, status, message)
						{
							ajaxExceptionMessage(jqXhr, status, message);
						},
						complete:function(a,b)
						{
							if(f.completeFn!="")
								f.completeFn(b);
							if(e)
								e.notifyTaskDone();
						}
					});
				}
			},
			runJsonExt:function(d,e)
			{
				with(this)
				{
					var f=$.extend({target:"",
									url:"",
									data:"",
									successFn:"",
									completeFn:"",
									errorFn:"",
									type:"POST",
									traditional:true},
									d);
					if(f.url=="")
						return;
					run({url:f.url,
						data:f.data,
						type:f.type,
						traditional:f.traditional,
						dataType:"json",
						success:function(a)
						{
							if(f.successFn!="")
								f.successFn(a);
						},
						error:function(jqXhr, status, message)
						{
							if(f.errorFn!="")
								f.errorFn(jqXhr, status, message);
							else
								ajaxExceptionMessage(jqXhr, status, message);
						},
						complete:function(a,b)
						{
							if(f.completeFn!="")
								f.completeFn(b);
							if(e)
								e.notifyTaskDone();
						}
					});
				}
			},	
			_addId:function(a)
			{
				FlowitUtil.log('_addId, id: '+a);
				if(!a)
					return;
				this.idsInQueue.push(a);
				FlowitUtil.log('_addId, idsInQueue: '+this.idsInQueue+'; length: '+this.idsInQueue.length);
			},
			_removeId:function(a)
			{
				with(this)
				{
					FlowitUtil.log('_removeId, id: '+a);
					for(var i=0;i<idsInQueue.length;i++)
					{
						if(idsInQueue[i]===a)
						{
							FlowitUtil.log('index: '+i);
							idsInQueue.splice(i,1);
							FlowitUtil.log('_removeId, idsInQueue: %s, length: %s',idsInQueue,idsInQueue.length);
							break;
						}
					}
				}
			},
			/*_initLoadingBar:function()
			{
				$.fn.nimbleLoader.setSettings({loaderClass:"loading_bar",debug:true,speed:'fast'});
			},
			_showLoader:function(a)
			{
				$('body').nimbleLoader(a?'show':'hide');
			}*/
		});